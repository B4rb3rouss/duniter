#!/usr/bin/env node
var config      = require('../config'),
    http        = require('http'),
    nodecoin    = require('../lib/nodecoin'),
    program   = require('commander');

program
  .version('0.0.1')
  .option('-p, --port <port>', 'Port to listen for requests', parseInt)
  .parse(process.argv);

config.server.port = program.port || config.server.port;

var app = nodecoin.express.app(config);

http.createServer(app).listen(app.get('port'), function(){
  console.log('NodeCoin server listening on port ' + app.get('port'));
});